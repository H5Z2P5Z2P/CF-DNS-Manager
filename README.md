# Cloudflare DNS & SaaS Manager

ä¸€ä¸ªè½»é‡åŒ–ã€å®Œå…¨è¿è¡Œåœ¨ Cloudflare ç”Ÿæ€ä¸­çš„ Cloudflare DNS ä¸ SaaS (SSL for SaaS) ç®¡ç†é¢æ¿ã€‚


## âœ¨ åŠŸèƒ½ç‰¹æ€§

- **DNS è®°å½•ç®¡ç†**ï¼šå®Œæ•´çš„ DNS è®°å½• CRUD æ“ä½œï¼Œæ”¯æŒæ‰¹é‡å¯¼å…¥/å¯¼å‡º
- **SaaS è‡ªå®šä¹‰ä¸»æœºå**ï¼šç®¡ç† SSL for SaaS è‡ªå®šä¹‰ä¸»æœºåï¼Œæ”¯æŒ SSL è¯ä¹¦é…ç½®
- **DNSPod é›†æˆ**ï¼ˆæ‰˜ç®¡æ¨¡å¼ï¼‰ï¼š
  - ç‹¬ç«‹çš„ DNSPod åŸŸåå’Œè®°å½•ç®¡ç†
  - è‡ªåŠ¨é…ç½®éªŒè¯è®°å½•ï¼šåˆ›å»ºè‡ªå®šä¹‰ä¸»æœºååè‡ªåŠ¨åœ¨ DNSPod åˆ›å»ºéªŒè¯ TXT è®°å½•
  - æ™ºèƒ½å»é‡ï¼šè‡ªåŠ¨æ£€æµ‹å¹¶è·³è¿‡å·²å­˜åœ¨çš„ç›¸åŒè®°å½•
- **å¤šè´¦æˆ·æ”¯æŒ**ï¼šé€šè¿‡ç¯å¢ƒå˜é‡é…ç½®å¤šä¸ª Cloudflare API Token
- **åŒæ¨¡å¼è¿è¡Œ**ï¼šæ”¯æŒæœ¬åœ°æ¨¡å¼ï¼ˆç›´æ¥ä½¿ç”¨ API Tokenï¼‰å’Œæ‰˜ç®¡æ¨¡å¼ï¼ˆæœåŠ¡ç«¯ä¸­è½¬ï¼‰


## ğŸ“‹ è¯¦ç»†éƒ¨ç½²æŒ‡å—

### Cloudflare Pages

1. Fork æˆ–å…‹éš†æœ¬ä»“åº“åˆ°æ‚¨çš„ GitHub è´¦æˆ·
2. ç™»å½• [Cloudflare Dashboard](https://dash.cloudflare.com/)ï¼Œè¿›å…¥ Workers å’Œ Pages é¡µé¢
3. ç‚¹å‡»"åˆ›å»ºåº”ç”¨-åˆ›å»º Pages åº”ç”¨"ï¼Œè¿æ¥æ‚¨çš„ GitHub ä»“åº“
4. æ¡†æ¶é¢„è®¾-é€‰æ‹©ï¼šReact(vite)
5. ç‚¹å‡»"ä¿å­˜å¹¶éƒ¨ç½²"

#### æ­¤æ—¶å¯ä»¥ä½¿ç”¨"æœ¬åœ°æ¨¡å¼"ç™»å½•äº†

å¦‚æœéœ€è¦"æ‰˜ç®¡æ¨¡å¼"ï¼Œè¯·ç»§ç»­è®¾ç½®ç¯å¢ƒå˜é‡ï¼š
1. åœ¨ Cloudflare Pages æ§åˆ¶é¢æ¿ä¸­ï¼Œç‚¹å‡»"è®¾ç½®" > "å˜é‡å’Œæœºå¯†" > æ·»åŠ ç±»å‹ï¼šå¯†é’¥
2. æ·»åŠ  `APP_PASSWORD` å˜é‡ï¼ˆå¿…é¡»è®¾ç½®ï¼‰ï¼ˆï¼ï¼ï¼è¯·ä½¿ç”¨å¤æ‚çš„å¯†ç ï¼Œå¦‚æœ‰å¿…è¦è¯·å¼€å¯"Cloudflare Access"ï¼‰
3. æ·»åŠ  `CF_API_TOKEN` å˜é‡ï¼ˆå¿…é¡»è®¾ç½®ï¼‰
4. æ·»åŠ  `CF_API_TOKEN1` å˜é‡ï¼ˆå¯é€‰ï¼‰
5. æ·»åŠ  `CF_API_TOKEN2` å˜é‡ï¼ˆå¯é€‰ï¼‰
6. è¿”å›éƒ¨ç½²é¡µé¢ï¼Œé€‰æ‹©"é‡æ–°éƒ¨ç½²"

#### DNSPod é›†æˆï¼ˆå¯é€‰ï¼Œæ‰˜ç®¡æ¨¡å¼ï¼‰

å¦‚éœ€ä½¿ç”¨ DNSPod è‡ªåŠ¨éªŒè¯åŠŸèƒ½ï¼Œè¯·é¢å¤–è®¾ç½®ï¼š
1. æ·»åŠ  `DNSPOD_SECRET_ID` å˜é‡ï¼ˆè…¾è®¯äº‘ API å¯†é’¥ IDï¼‰
2. æ·»åŠ  `DNSPOD_SECRET_KEY` å˜é‡ï¼ˆè…¾è®¯äº‘ API å¯†é’¥ Keyï¼‰

> è·å–å¯†é’¥ï¼šç™»å½• [è…¾è®¯äº‘æ§åˆ¶å°](https://console.cloud.tencent.com/cam/capi) > è®¿é—®å¯†é’¥ > API å¯†é’¥ç®¡ç†

é…ç½®åï¼Œåˆ›å»ºè‡ªå®šä¹‰ä¸»æœºåæ—¶ä¼šè‡ªåŠ¨åœ¨ DNSPod åˆ›å»ºéªŒè¯è®°å½•ã€‚

#### API ä»¤ç‰Œæƒé™æ¨èï¼šåŒºåŸŸ.DNS.ç¼–è¾‘ï¼ŒåŒºåŸŸ.SSLå’Œè¯ä¹¦.ç¼–è¾‘

## ğŸ—ï¸ é¡¹ç›®æ¶æ„

æœ¬é¡¹ç›®é‡‡ç”¨ **è¾¹ç¼˜åŸç”Ÿ (Edge-Native)** å…¨æ ˆæ¶æ„ï¼Œå®Œå…¨è¿è¡Œåœ¨ Cloudflare ç”Ÿæ€ä¸­ï¼š

- **Frontend**: åŸºäº React 18 ä¸ Vite æ„å»ºçš„å•é¡µåº”ç”¨ (SPA)ï¼Œé€šè¿‡ Cloudflare Pages å…¨çƒåˆ†å‘ã€‚
- **Backend**: ä½¿ç”¨ Cloudflare Pages Functions å®ç° Serverless APIï¼Œè¿è¡Œåœ¨è¾¹ç¼˜èŠ‚ç‚¹ã€‚
- **Security**: 
    - **æ‰˜ç®¡æ¨¡å¼**ï¼šåç«¯æ ¡éªŒ `APP_PASSWORD` å¹¶é¢å‘åŸºäº `jose` ç­¾åçš„ JWT ä»¤ç‰Œã€‚
    - **æœ¬åœ°æ¨¡å¼**ï¼šå‰ç«¯ä»¤ç‰Œé€šè¿‡è‡ªå®šä¹‰ Header ç»åç«¯é€æ˜ä»£ç†ï¼Œä¸ç»è¿‡ä»»ä½•æŒä¹…åŒ–å­˜å‚¨ã€‚
- **Middleware**: è‡ªåŠ¨æ‹¦æˆªå¹¶æ ¡éªŒæ‰€æœ‰ API è¯·æ±‚çš„èº«ä»½åˆæ³•æ€§ã€‚


## å¼€å‘ä¸éƒ¨ç½²

### å¼€å‘ç¯å¢ƒ
1. **å®‰è£…ä¾èµ–**ï¼š
   ```bash
   npm install
   ```
2. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**ï¼š
   ```bash
   # æ¨¡æ‹Ÿæœ¬åœ°æ¨¡å¼
   npm run dev
   
   # æ¨¡æ‹Ÿæ‰˜ç®¡æ¨¡å¼ (éœ€å®‰è£… wrangler)
   # åˆ›å»º .dev.vars æ–‡ä»¶é…ç½®ç¯å¢ƒå˜é‡
   npx wrangler pages dev ./dist
   ```

### ç”Ÿäº§éƒ¨ç½²
1. **ç¼–è¯‘æ‰“åŒ…**ï¼š
   ```bash
   npm run build
   ```
2. **å‘å¸ƒè‡³ Pages**ï¼š
   ```bash
   npx wrangler pages deploy dist
   ```

---
*ç”± [Antigravity](https://github.com/google-deepmind) é©±åŠ¨å¼€å‘*
